<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <title>GSW Math Tournament</title>
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta content="" name="keywords">
        <meta content="" name="description">
    
        <!-- Favicon -->
        <!--- <link href="/css/Templates/solartec-1.0.0/img/favicon.ico" rel="icon"> --->
    
        <!-- Google Web Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500&family=Roboto:wght@500;700;900&display=swap" rel="stylesheet"> 
    
        <!-- Icon Font Stylesheet -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
    
        <!-- Libraries Stylesheet -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta2/dist/css/bootstrap-select.min.css">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link href="CSS/custom.css" rel="stylesheet">
    </head>

<body>
    <!-- Topbar Start -->
    <div class="container-fluid gsw-primary p-0" style="z-index: 500;">
        <div class="row gx-0 d-none d-lg-flex">
            <div class="col-lg-7 px-5 text-start">
                <div class="h-100 d-inline-flex align-items-center me-4">
                    <small class="fa fa-map-marker-alt gsw-text-secondary me-2"></small>
                    <small class="text-white">800 Georgia Southwestern State University Dr, Americus, GA 31709</small>
                </div>
                <div class="h-100 d-inline-flex align-items-center">
                    <small class="far fa-clock gsw-text-secondary me-2"></small>
                    <small class="text-white">Mon - Fri : 08:00 AM - 05:00 PM</small>
                </div>
            </div>
            <div class="col-lg-5 px-5 text-end">
                <div class="h-100 d-inline-flex align-items-center me-4">
                    <small class="fa fa-phone-alt gsw-text-secondary me-2"></small>
                    <small class="text-white">877-871-4594</small>
                </div>
                <div class="h-100 d-inline-flex align-items-center mx-n2">
                    <a class="btn btn-square btn-link rounded-0 border-0 border-end border-secondary gsw-text-secondary" href="https://www.facebook.com/GeorgiaSouthwestern/"><i class="fab fa-facebook-f"></i></a>
                    <a class="btn btn-square btn-link rounded-0 border-0 border-end border-secondary gsw-text-secondary" href="https://twitter.com/GaSouthwestern"><i class="fab fa-twitter"></i></a>
                    <a class="btn btn-square btn-link rounded-0 border-0 border-end border-secondary gsw-text-secondary" href="https://www.linkedin.com/school/georgia-southwestern-state-university/"><i class="fab fa-linkedin-in"></i></a>
                    <a class="btn btn-square btn-link rounded-0 gsw-text-secondary" href="http://www.instagram.com/georgiasouthwestern"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
    </div>
    <!-- Topbar End -->

    <!-- Navbar Start -->
    <nav class="container-fluid navbar navbar-expand-lg navbar-light sticky-top p-0" style="background-color: #e3e3e3; z-index: 500;">
        <a href="index.html" class="navbar-brand mr-auto d-flex align-items-center border-end px-4 px-lg-5">
            <h2 class="m-0 gsw-text-primary">Divide-Conquer</h2>
        </a>
        <button type="button" class="navbar-toggler me-2" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav ms-auto p-2 p-lg-0">
                <div class="nav-item dropdown">
                    <a href="" class="nav-link dropdown-toggle" style="padding-right: 40px;" data-bs-toggle="dropdown">Info</a>
                    <div class="dropdown-menu bg-light m-0">
                        <a href="about.html" class="dropdown-item">About</a>
                        <a href="" class="dropdown-item">Past Tounrnaents</a>
                        <a href="" class="dropdown-item">Other</a>
                    </div>
                </div>
            </div>
            <a href="login.html" class="btn btn-primary btn-outline-light gsw-secondary gsw-text-primary rounded-0 py-4 px-lg-5 d-lg-block">Login<i class="fa fa-arrow-right ms-3"></i></a>
            </div>
    </nav>
    <!-- Navbar End -->
    
    
    
    <div class="container" id="createUser">
        <h1 class="gsw-text-primary" style="text-align: center; padding: 20px;">
            Create New Account
        </h1>
        <form style="text-align: center;" class="login" action="testinglogin.html" method="POST" id="create-user">
            <input style="text-align: center; padding: 20px;" type="text" name="" placeholder="Enter your email." id="email">
            <input style="text-align: center; padding: 20px;" type="password" name="" placeholder="Enter your password." id="password">
            <input style="text-align: center; padding: 20px;" type="password" name="" placeholder="Reenter your password." id="password2">
            <br>
            <div style="display: inline-block;  padding-top: 10px;" id="html_element"></div>
            <p></p>
            <input class="btn btn-primary btn-outline-light mx-auto gsw-secondary gsw-text-primary rounded-0 py-4 px-lg-5 d-lg-block" style="padding: 20px; width: 300px;" type="submit" name="" value="Create Account">
        </form>
        <a href="https://math.gswcm.net/login.html" class="btn btn-primary btn-outline-light mx-auto gsw-secondary gsw-text-primary rounded-0 py-4 px-lg-5 d-lg-block" style="padding: 20px; width: 300px;">Already have an account?</a>
        <!-- <a href="newuser.html" class="btn btn-primary btn-outline-light mx-auto gsw-secondary gsw-text-primary rounded-0 py-4 px-lg-5 d-lg-block" style="padding: 20px; width: 300px;">New Account<i class="fa fa-arrow-right ms-3"></i></a>  -->
        <!-- <a href="newuser.html" class="btn btn-primary btn-outline-light mx-auto gsw-secondary gsw-text-primary rounded-0 py-4 px-lg-5 d-lg-block" style="padding: 20px; width: 300px;">Forgot Password<i class="fa fa-arrow-right ms-3"></i></a> -->
    </div>

    <div id="QRCode" style="text-align: center; visibility: hidden;">
        <h1 class="gsw-text-primary" style="text-align: center; padding: 20px;">
            Please scan QRCode in Google Authenticator
        </h1>
        <a class="btn btn-primary btn-outline-light mx-auto gsw-secondary gsw-text-primary rounded-0 py-4 px-lg-5 d-lg-block" style="padding: 20px; width: 300px;" id="QRSubmit">Click when done</a>
    </div>




    <!-- JavaScript Libraries -->
    <!-- <script src="/JS/login.js" -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta2/dist/js/bootstrap-select.min.js"></script>
    <script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>
    <script type="text/javascript">
        var onloadCallback = function() {
          grecaptcha.render('html_element', {
            'sitekey' : '6Lcj91IlAAAAALQVutpKbz6MhbUtkwp5YXvVt_jN'
          });
        };
    </script>
    <script>
        const form1 = document.getElementById('create-user');

        form1.addEventListener('submit', (event) => {
            event.preventDefault();
        
        
        var email = document.getElementById("email").value;
        var savedPass = document.getElementById("password").value;
        var password2 = document.getElementById("password2").value;
        var captcha = grecaptcha.getResponse();

        if(captcha.length == 0){
            alert("You must complete the captcha.");
        }
        else{
        const data = {
            Email: email,
            Password: savedPass,
            Password2: password2,
        };
        // console.log(data)
        fetch(`https://math.gswcm.net:443/JS/update_user`, {
        method: 'POST',
        headers: {
        'Content-Type': 'application/json'
        },
            body: JSON.stringify(data)
        })
        .then(response => response.text())
        .then(data => {
        //console.log(data); // outputs "User updated"
            if(data == "password-match-error"){
                alert("The password that you entered did not match.")
            }
            else if (data == "same-email-error"){
                alert("The email that you entered already exists.")
            }
            else if (data == "password-less-than-min"){
                alert("The password that you entered did not meet or exceed 8 characters.")
            }
            else if (data.includes("base64")){
                console.log(data)
                const division = document.getElementById('QRCode')
                const image = document.createElement('img')
                image.src = data;
                division.appendChild(image)
                const createdivision = document.getElementById('createUser')
                createdivision.style.display = 'none';
                division.style.visibility = 'visible';
            }
            else{
                alert("There was an error. Please try again later.")
            }
        })
        .catch(error => {
        console.error(error);
        });
    }
    })


    </script>
    <script>
        const QRButton = document.querySelector('#QRSubmit');
        QRButton.addEventListener('click', continuetonextpage);

        function continuetonextpage() {
            alert("Please check your email for your confirmation.")
            const url = `https://math.gswcm.net/login.html`
            window.location.replace(url);
        }
    </script>
</body>

</html>